<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.com.realer.dao.expand.u.GabUPoliceThemeExpandMapper">
<resultMap id="BaseResultMap" type="cn.com.realer.pojo.GabUPoliceTheme">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="police_id" jdbcType="INTEGER" property="policeId" />
    <result column="model_id" jdbcType="INTEGER" property="modelId" />
    <result column="theme_id" jdbcType="INTEGER" property="themeId" />
    <result column="status" jdbcType="SMALLINT" property="status" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="update_time" jdbcType="TIMESTAMP" property="updateTime" />
    <result column="isdelete" jdbcType="SMALLINT" property="isdelete" />
    <result column="auditor_" jdbcType="VARCHAR" property="auditor" />
    <result column="audit_time" jdbcType="TIMESTAMP" property="auditTime" />
    <result column="audit_desc" jdbcType="VARCHAR" property="auditDesc" />
  </resultMap>
   
  	<sql id="Fields">
        t.id, t.police_id, t.model_id, t.theme_id, t.status, t.create_time, t.update_time, t.isdelete,
        t.auditor_,t.audit_time,t.audit_desc        
    </sql>
    
    <resultMap id="BaseResultMap1" type="cn.com.realer.pojo.vo.GabUPoliceThemeVo">
	    <!--
	      WARNING - @mbggenerated
	      This element is automatically generated by MyBatis Generator, do not modify.
	    -->
	    <id column="id" jdbcType="INTEGER" property="id" />
	    <result column="police_id" jdbcType="INTEGER" property="policeId" />
	    <result column="police_name" jdbcType="VARCHAR" property="policeName" />
	    <result column="model_id" jdbcType="INTEGER" property="modelId" />
	    <result column="theme_id" jdbcType="INTEGER" property="themeId" />
	    <result column="theme_name" jdbcType="VARCHAR" property="themeName" />
	    <result column="status" jdbcType="SMALLINT" property="status" />
	    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
	    <result column="update_time" jdbcType="TIMESTAMP" property="updateTime" />
	    <result column="isdelete" jdbcType="SMALLINT" property="isdelete" />
	    <result column="auditor_" jdbcType="VARCHAR" property="auditor" />
	    <result column="audit_time" jdbcType="TIMESTAMP" property="auditTime" />
	    <result column="audit_desc" jdbcType="VARCHAR" property="auditDesc" />
	  </resultMap>
    
  	<sql id="Fields1">
        t.id, t.police_id, t.model_id, t.theme_id, t.status, t.create_time, t.update_time, t.isdelete,
        t.auditor_,t.audit_time,t.audit_desc, g.name_ as theme_name, p.name_ as police_name       
    </sql>
  
  
  <select id="selectAll" resultMap="BaseResultMap1" parameterType="map">
       SELECT  <include refid="Fields1"></include>
		FROM
			gab_u_police P , gab_m_theme g,
			gab_u_police_theme t 
		WHERE
			P."id" = t.police_id 
			AND t.theme_id = g."id"
		 <if test="policeName!=null">
            and p.name_ like CONCAT('%',#{policeName},'%') 
        </if>
        <if test="themeName!=null">
            and g.name_ like CONCAT('%',#{themeName},'%') 
        </if>
        <if test="status!=null">
            and t.status like CONCAT('%',#{status},'%') 
        </if>
   </select>
   
  <select id="selectList" resultMap="BaseResultMap" parameterType="map">
        SELECT  <include refid="Fields"></include> from gab_u_police_theme t WHERE (t.isdelete IS NULL OR t.isdelete=0)
        <if test="id!=null">
            and t.id = #{id}
        </if>
   </select>
  
  <select id="selectStatusCount" resultType="java.lang.Long" parameterType="map">
        SELECT COUNT(1) from gab_u_police_theme t WHERE (t.isdelete IS NULL OR t.isdelete=0)
        <if test="id!=null">
            and t.id = #{id}
        </if>
        <if test="policeId!=null">
            and t.police_id = #{policeId}
        </if>
        <if test="themeId!=null">
            and t.theme_id = #{themeId}
        </if>
        <if test="status!=null">
            and t.status = #{status}
        </if>
   </select>
  
  
  </mapper>