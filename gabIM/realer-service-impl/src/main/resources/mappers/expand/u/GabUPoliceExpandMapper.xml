<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.com.realer.dao.expand.u.GabUPoliceExpandMapper">

 	<resultMap id="BaseResultMap" type="cn.com.realer.pojo.GabUPolice">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="name_" jdbcType="VARCHAR" property="name" />
    <result column="location_id" jdbcType="INTEGER" property="locationId" />
    <result column="address_" jdbcType="VARCHAR" property="address" />
    <result column="category_id" jdbcType="INTEGER" property="categoryId" />
    <result column="erea_" jdbcType="NUMERIC" property="erea" />
    <result column="header_name" jdbcType="VARCHAR" property="headerName" />
    <result column="header_phone" jdbcType="VARCHAR" property="headerPhone" />
    <result column="telephone_" jdbcType="VARCHAR" property="telephone" />
    <result column="password_" jdbcType="VARCHAR" property="password" />
    <result column="status" jdbcType="SMALLINT" property="status" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="update_time" jdbcType="TIMESTAMP" property="updateTime" />
    <result column="isdelete" jdbcType="SMALLINT" property="isdelete" />
    <result column="active_status" jdbcType="SMALLINT" property="activeStatus" />
    <result column="position" jdbcType="VARCHAR" property="position" />
    <result column="province_" jdbcType="INTEGER" property="province" />
    <result column="city_" jdbcType="INTEGER" property="city" />
    <result column="area_" jdbcType="INTEGER" property="area" />
    <result column="jurisdiction_" jdbcType="INTEGER" property="jurisdiction" />
    <result column="residence_" jdbcType="INTEGER" property="residence" />
    <result column="property_" jdbcType="INTEGER" property="property" />
    <result column="active_code" jdbcType="VARCHAR" property="activeCode" />
    <result column="rating_" jdbcType="INTEGER" property="rating" />
    <result column="email_" jdbcType="VARCHAR" property="email" />
  </resultMap>
  
  <sql id="Fields">
        t.id, t.name_, t.location_id, t.address_, t.category_id, t.erea_, t.header_name, t.header_phone,
         t.telephone_, t.password_, t.status, t.create_time, t.update_time, t.isdelete, t.province_, t.active_status,
          t.position, t.city_, t.area_, t.jurisdiction_, t.residence_, t.property_, t.active_code,t.rating_,t.email_
    </sql>
  
  <update id="updateByPrimaryKey" parameterType="cn.com.realer.pojo.GabUPolice">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update gab_u_police
    set name_ = #{name,jdbcType=VARCHAR},
      location_id = #{locationId,jdbcType=INTEGER},
      address_ = #{address,jdbcType=VARCHAR},
      category_id = #{categoryId,jdbcType=INTEGER},
      erea_ = #{erea,jdbcType=NUMERIC},
      header_name = #{headerName,jdbcType=VARCHAR},
      header_phone = #{headerPhone,jdbcType=VARCHAR},
      telephone_ = #{telephone,jdbcType=VARCHAR},
      password_ = #{password,jdbcType=VARCHAR},
      status = #{status,jdbcType=SMALLINT},
      create_time = #{createTime,jdbcType=TIMESTAMP},
      update_time = #{updateTime,jdbcType=TIMESTAMP},
      isdelete = #{isdelete,jdbcType=SMALLINT},
      active_status = #{activeStatus,jdbcType=SMALLINT},
      position = #{position,jdbcType=VARCHAR},
      province_ = #{province,jdbcType=INTEGER},
      city_ = #{city,jdbcType=INTEGER},
      area_ = #{area,jdbcType=INTEGER},
      jurisdiction_ = #{jurisdiction,jdbcType=INTEGER},
      residence_ = #{residence,jdbcType=INTEGER},
      property_ = #{property,jdbcType=INTEGER},
      active_code = #{activeCode,jdbcType=VARCHAR},
      rating_ = #{rating,jdbcType=INTEGER},
      email_ = #{email,jdbcType=VARCHAR}
    where id = #{id,jdbcType=INTEGER}
  </update>
  
  <select id="selectList" resultMap="BaseResultMap" parameterType="map">
        SELECT  <include refid="Fields"></include> from gab_u_police t WHERE (t.isdelete IS NULL OR t.isdelete=0)
        <if test="id!=null">
            and t.id = #{id}
        </if>
        <if test="name!=null">
            and t.name_ like CONCAT('%',#{name},'%')
        </if>
        <if test="headerName!=null">
            and t.header_name like CONCAT('%',#{headerName},'%')
        </if>
        <if test="province!=null">
            and t.province_ = #{province}
        </if>
   </select>
  
  <!--  注册	判断 用户名 是否被占用 -->
   <select id="checkPoliceName" resultType="int" parameterType="string">
        SELECT count(1) FROM gab_u_police t WHERE t.name_ = #{name}
   </select>
   
   <!-- 判断 Email 是否被占用 -->
   <select id="checkEmail" resultType="int" parameterType="string">
        SELECT count(1) FROM gab_u_police t WHERE t.email_ = #{email}
   </select>
   <!-- 判断 用户密码是否正确  -->
   <select id="checkPassword" resultType="int" parameterType="map">
        SELECT count(1) FROM gab_u_police t WHERE t.password = #{password} AND t.id = #{id}
   </select>
   <!-- 判断 用户邮箱是否正确  -->
   <select id="checkEmailByPoliceId" resultType="int" parameterType="map">
        SELECT count(1) FROM gab_u_police t WHERE t.email_ = #{email} AND t.id != #{id}
   </select>
   
   <!-- 登录 认证 -->
   <select id="Login" resultMap="BaseResultMap" parameterType="map">
        SELECT <include refid="Fields"></include> from gab_u_police t WHERE t.name_ = #{name} AND t.password_ = #{password}
   </select>
   
   <!-- 修改密码 -->
   <update id="updatePasswordByPoliceName" parameterType="map">
      UPDATE gab_u_police t
      set t.password_ = #{password} ,t.update_time = now()
      where t.name = #{name}
   </update>
   
   <!-- 激活 -->
   <select id="selectByActiveCode" resultMap="BaseResultMap" parameterType="string">
        SELECT <include refid="Fields"></include> from gab_u_police t WHERE t.active_code = #{activeCode}
   </select>
   
   <!-- 忘记密码 -->
   <select id="checkEmailByPoliceName" resultMap="BaseResultMap" parameterType="map">
        SELECT <include refid="Fields"></include> FROM gab_u_police t WHERE t.email_ = #{email} AND t.name_ = #{name}
   </select>
  
  <select id="queryByName" resultMap="BaseResultMap" parameterType="string">
        SELECT  <include refid="Fields"></include> from gab_u_police t WHERE (t.isdelete IS NULL OR t.isdelete=0)
        <if test="name!=null">
            and t.name_ = #{name}
        </if>
   </select>
  
   <select id="queryByActiveCode" resultMap="BaseResultMap" parameterType="string">
        SELECT  <include refid="Fields"></include> from gab_u_police t WHERE (t.isdelete IS NULL OR t.isdelete=0)
        <if test="activeCode!=null">
            and t.active_code = #{activeCode}
        </if>
   </select>
  
  
  </mapper>