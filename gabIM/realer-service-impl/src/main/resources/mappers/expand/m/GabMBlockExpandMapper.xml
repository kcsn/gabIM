<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.com.realer.dao.expand.m.GabMBlockExpandMapper" >
 <resultMap id="BaseResultMap" type="cn.com.realer.pojo.GabMBlock" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="name_" property="name" jdbcType="VARCHAR" />
    <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
    <result column="update_time" property="updateTime" jdbcType="TIMESTAMP" />
    <result column="isdelete" property="isdelete" jdbcType="SMALLINT" />
    <result column="model_id" property="modelId" jdbcType="INTEGER" />
    <result column="order_id" property="orderId" jdbcType="INTEGER" />
    <result column="icon" property="icon" jdbcType="VARCHAR" />
  </resultMap>
  
  <sql id="Fields">
       t.id, t.name_, t.create_time, t.update_time, t.isdelete, t.model_id, t.order_id, t.icon
    </sql>
    <select id="selectList" resultMap="BaseResultMap" parameterType="map">
        SELECT <include refid="Fields"></include> from gab_m_block t WHERE (t.isdelete IS NULL OR t.isdelete=0)
        <if test="orderId!=null">
            and t.order_id = #{orderId}
        </if>
        <if test="modelId!=null">
            and t.model_id = #{modelId}
        </if>
        
    </select>
   
   
    <resultMap id="BaseResultMap1" type="cn.com.realer.pojo.vo.BlockVo" >
    
    <!--   WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify. -->
   
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="name_" property="name" jdbcType="VARCHAR" />
    <result column="status" property="status" jdbcType="INTEGER" />
    <result column="icon" property="icon" jdbcType="VARCHAR" />
  </resultMap> 
   
     <select id="selectListBlock" resultMap="BaseResultMap1" parameterType="map">
        SELECT b."id",b.name_,b.icon,s.status from gab_m_block b, gab_m_block_status s WHERE (b.isdelete IS NULL OR b.isdelete=0)
       and b."id" = s.block_id
        <if test="policeId!=null">
            and s.police_id = #{policeId}
     </if>
         <if test="themeId!=null">
            and s.theme_id = #{themeId}
        </if>
    </select> 
    
    
  </mapper>